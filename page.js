const i18n = {
    en: {
        brandName: 'Animal Energy',
        brandTagline: 'Global ILJU Insight Studio',
        navOverview: 'Overview',
        navInsights: 'Insights',
        navPlans: 'Plans',
        navSupport: 'Support',
        loginButton: 'Log in',
        signupButton: 'Create account',
        footerBrand: 'Animal Energy',
        footerTagline: 'Global ILJU Insight Studio',
        footerText: 'A professional, global-first interpretation of ILJU symbols for modern decision-making.',
        footerLinkOverview: 'Overview',
        footerLinkInsights: 'Insights',
        footerLinkPlans: 'Plans',
        footerLinkSupport: 'Support',
        langLabel: 'Language',
        languageNames: {
            en: 'English',
            ja: 'Japanese',
            ko: 'Korean'
        },
        pages: {
            overview: {
                pageEyebrow: 'Service Overview',
                pageTitle: 'Professional ILJU readings for modern life',
                pageSubtitle: 'A structured, international-friendly interpretation system that turns tradition into clarity.',
                primaryCta: 'Start a reading',
                secondaryCta: 'View plans',
                panelTitle: 'Built for global users',
                panelText: 'We simplify complex symbolism into clear guidance you can share and revisit.',
                panelStat1: '20+ countries',
                panelStat2: 'Private profiles',
                panelStat3: 'Exportable summaries',
                sectionOneTitle: 'How it works',
                stepOneTitle: 'Enter your birth data',
                stepOneText: 'We calculate your day pillar, animal, and elemental balance.',
                stepTwoTitle: 'Receive a clear summary',
                stepTwoText: 'Key themes appear in a structured, easy-to-read layout.',
                stepThreeTitle: 'Save or share',
                stepThreeText: 'Store readings in your dashboard or export for consultation.',
                sectionTwoTitle: 'What you receive',
                featureOne: 'ILJU animal and element profile',
                featureTwo: 'Keyword themes and seasonal tone',
                featureThree: 'Professional-format summary cards',
                featureFour: 'Cross-language sharing tools',
                sectionThreeTitle: 'Designed for international clarity',
                sectionThreeText: 'We focus on consistency, privacy, and clean interpretation so global users can trust the output.'
            },
            insights: {
                pageEyebrow: 'Insights',
                pageTitle: 'Understand what your symbols reveal',
                pageSubtitle: 'Each reading translates traditional symbols into accessible, modern language.',
                primaryCta: 'Get my insight',
                secondaryCta: 'See plans',
                heroPanelTitle: 'Focused guidance',
                heroPanelText: 'We highlight the most relevant themes for fast understanding.',
                sectionOneTitle: 'Core insight pillars',
                insightOneTitle: 'Animal archetype',
                insightOneText: 'Your day animal represents instinctual strengths and direction.',
                insightTwoTitle: 'Elemental energy',
                insightTwoText: 'Five-element balance reveals temperament and momentum.',
                insightThreeTitle: 'Keyword focus',
                insightThreeText: 'Short, actionable themes keep the reading practical.',
                sectionTwoTitle: 'Sample breakdown',
                sampleLead: 'What your report includes:',
                sampleItem1: 'Day pillar summary and symbolic translation',
                sampleItem2: 'Element balance with tonal guidance',
                sampleItem3: 'Behavioral cues and life planning notes',
                sampleCardTitle: 'Sample Insight Card',
                sampleCardText: 'A concise, global-ready summary designed for sharing and saving.'
            },
            plans: {
                pageEyebrow: 'Plans',
                pageTitle: 'Choose a plan that matches your depth',
                pageSubtitle: 'Start with a single reading or build a full dashboard for ongoing insights.',
                primaryCta: 'Start with Starter',
                secondaryCta: 'Compare features',
                heroPanelTitle: 'Flexible access',
                heroPanelText: 'Upgrade anytime as your curiosity grows.',
                sectionOneTitle: 'Plans for every level',
                planStarterTitle: 'Starter',
                planStarterText: 'One-time reading with key themes and summary.',
                planStarterPrice: '$9',
                planStarterCta: 'Choose Starter',
                planStarterFeature1: 'Single reading summary',
                planStarterFeature2: 'Keyword themes',
                planStarterFeature3: 'Shareable report',
                planProTitle: 'Pro',
                planProText: 'Unlimited readings, profile history, and exportable reports.',
                planProPrice: '$19 / month',
                planProCta: 'Choose Pro',
                planProFeature1: 'Unlimited readings',
                planProFeature2: 'Profile dashboard',
                planProFeature3: 'PDF exports',
                planPlusTitle: 'Plus',
                planPlusText: 'Includes consultation-ready insights and priority support.',
                planPlusPrice: '$39 / month',
                planPlusCta: 'Choose Plus',
                planPlusFeature1: 'Consultation notes',
                planPlusFeature2: 'Priority support',
                planPlusFeature3: 'Advanced guidance'
            },
            support: {
                pageEyebrow: 'Support',
                pageTitle: 'Guided by clarity and trust',
                pageSubtitle: 'We help international users understand their readings with confidence.',
                primaryCta: 'Contact support',
                secondaryCta: 'Back to overview',
                heroPanelTitle: 'Always here',
                heroPanelText: 'Clear help and respectful guidance across time zones.',
                sectionOneTitle: 'Help for global users',
                supportCardOneTitle: 'Privacy by default',
                supportCardOneText: 'Your readings are private. Log in to keep them secure across devices.',
                supportCardTwoTitle: 'Language-ready outputs',
                supportCardTwoText: 'We offer wording and structure that translates well across cultures.',
                supportCardThreeTitle: 'FAQ and guidance',
                supportCardThreeText: 'Clear answers to common questions, updated regularly.',
                sectionTwoTitle: 'Frequently asked',
                faqOneTitle: 'Is ILJU fortune-telling?',
                faqOneText: 'We focus on symbolic interpretation, not prediction, to support self-understanding.',
                faqTwoTitle: 'Do I need my birth time?',
                faqTwoText: 'Birth time is optional. It helps refine details but is not required.',
                faqThreeTitle: 'Can I share my results?',
                faqThreeText: 'Yes. Reports are designed for sharing with advisors or family.'
            }
        }
    },
    ja: {
        brandName: 'Animal Energy',
        brandTagline: 'グローバル日柱スタジオ',
        navOverview: '概要',
        navInsights: 'インサイト',
        navPlans: 'プラン',
        navSupport: 'サポート',
        loginButton: 'ログイン',
        signupButton: '会員登録',
        footerBrand: 'Animal Energy',
        footerTagline: 'グローバル日柱スタジオ',
        footerText: '現代の意思決定に寄り添う、国際対応のILJU解析。',
        footerLinkOverview: '概要',
        footerLinkInsights: 'インサイト',
        footerLinkPlans: 'プラン',
        footerLinkSupport: 'サポート',
        langLabel: '言語',
        languageNames: {
            en: '英語',
            ja: '日本語',
            ko: '韓国語'
        },
        pages: {
            overview: {
                pageEyebrow: 'サービス概要',
                pageTitle: '現代向けのプロ日柱リーディング',
                pageSubtitle: '伝統的な象徴を、グローバルでも理解できる明快な形に。',
                primaryCta: '診断を始める',
                secondaryCta: 'プランを見る',
                panelTitle: '世界対応の設計',
                panelText: '複雑な象徴を、共有しやすい言葉と構造に整理します。',
                panelStat1: '20か国以上',
                panelStat2: 'プライベート管理',
                panelStat3: 'レポート出力',
                sectionOneTitle: '流れ',
                stepOneTitle: '生年月日を入力',
                stepOneText: '日柱・動物・五行バランスを計算します。',
                stepTwoTitle: '整理された要約',
                stepTwoText: 'テーマをわかりやすい構成で表示します。',
                stepThreeTitle: '保存・共有',
                stepThreeText: 'ダッシュボードに保存し、相談用に出力できます。',
                sectionTwoTitle: '提供内容',
                featureOne: '日柱動物と五行プロフィール',
                featureTwo: 'キーワードテーマと季節のトーン',
                featureThree: 'プロ形式の要約カード',
                featureFour: '多言語共有ツール',
                sectionThreeTitle: '国際ユーザー向け',
                sectionThreeText: '一貫性・プライバシー・明快さを重視しています。'
            },
            insights: {
                pageEyebrow: 'インサイト',
                pageTitle: '象徴が示す意味を理解する',
                pageSubtitle: '伝統的な意味を、現代的にわかりやすく翻訳します。',
                primaryCta: 'インサイトを見る',
                secondaryCta: 'プランを見る',
                heroPanelTitle: '要点だけ',
                heroPanelText: '重要なテーマを素早く把握できます。',
                sectionOneTitle: 'コア要素',
                insightOneTitle: '動物アーキタイプ',
                insightOneText: '日柱動物は本質的な強みと方向性を示します。',
                insightTwoTitle: '五行の気',
                insightTwoText: '五行バランスは性質と流れを映します。',
                insightThreeTitle: 'キーワード',
                insightThreeText: '実用的な短いテーマで整理します。',
                sectionTwoTitle: 'サンプル内訳',
                sampleLead: 'レポートに含まれる内容:',
                sampleItem1: '日柱サマリーと象徴の説明',
                sampleItem2: '五行バランスとトーン',
                sampleItem3: '行動のヒントと計画ノート',
                sampleCardTitle: 'サンプルカード',
                sampleCardText: '共有と保存を前提にした簡潔な要約です。'
            },
            plans: {
                pageEyebrow: 'プラン',
                pageTitle: '深さに合わせて選ぶ',
                pageSubtitle: '1回の診断からダッシュボード運用まで。',
                primaryCta: 'スターターから始める',
                secondaryCta: '機能を比較',
                heroPanelTitle: '柔軟なアクセス',
                heroPanelText: '必要に応じていつでもアップグレード可能。',
                sectionOneTitle: 'プラン一覧',
                planStarterTitle: 'スターター',
                planStarterText: '1回の診断と要約。',
                planStarterPrice: '$9',
                planStarterCta: 'スターターを選ぶ',
                planStarterFeature1: '単発の要約',
                planStarterFeature2: 'キーワード提示',
                planStarterFeature3: '共有用レポート',
                planProTitle: 'プロ',
                planProText: '無制限の診断と履歴、レポート出力。',
                planProPrice: '$19 / 月',
                planProCta: 'プロを選ぶ',
                planProFeature1: '無制限の診断',
                planProFeature2: 'プロフィール管理',
                planProFeature3: 'PDF出力',
                planPlusTitle: 'プラス',
                planPlusText: '相談向けインサイトと優先サポート。',
                planPlusPrice: '$39 / 月',
                planPlusCta: 'プラスを選ぶ',
                planPlusFeature1: '相談用メモ',
                planPlusFeature2: '優先サポート',
                planPlusFeature3: '深いガイダンス'
            },
            support: {
                pageEyebrow: 'サポート',
                pageTitle: '明快さと信頼を重視',
                pageSubtitle: '国際ユーザー向けに丁寧な案内を行います。',
                primaryCta: 'サポートに連絡',
                secondaryCta: '概要に戻る',
                heroPanelTitle: 'いつでも対応',
                heroPanelText: 'タイムゾーンに配慮した案内を提供。',
                sectionOneTitle: 'グローバル対応',
                supportCardOneTitle: 'プライバシー保護',
                supportCardOneText: '結果は安全に管理されます。',
                supportCardTwoTitle: '多言語設計',
                supportCardTwoText: '文化差を考慮した表現を提供します。',
                supportCardThreeTitle: 'FAQとガイド',
                supportCardThreeText: 'よくある質問を整理して掲載。',
                sectionTwoTitle: 'よくある質問',
                faqOneTitle: '占いですか？',
                faqOneText: '予測ではなく、象徴の解釈に重点を置いています。',
                faqTwoTitle: '出生時間は必要？',
                faqTwoText: '任意です。詳細度が上がりますが必須ではありません。',
                faqThreeTitle: '結果は共有できますか？',
                faqThreeText: 'はい。共有しやすい形式で出力できます。'
            }
        }
    },
    ko: {
        brandName: 'Animal Energy',
        brandTagline: '글로벌 일주 인사이트 스튜디오',
        navOverview: '개요',
        navInsights: '인사이트',
        navPlans: '플랜',
        navSupport: '지원',
        loginButton: '로그인',
        signupButton: '회원가입',
        footerBrand: 'Animal Energy',
        footerTagline: '글로벌 일주 인사이트 스튜디오',
        footerText: '현대적 의사결정에 맞춘 글로벌 ILJU 해석 서비스.',
        footerLinkOverview: '개요',
        footerLinkInsights: '인사이트',
        footerLinkPlans: '플랜',
        footerLinkSupport: '지원',
        langLabel: '언어',
        languageNames: {
            en: '영어',
            ja: '일본어',
            ko: '한국어'
        },
        pages: {
            overview: {
                pageEyebrow: '서비스 개요',
                pageTitle: '현대적 일주 리딩',
                pageSubtitle: '전통 상징을 글로벌 사용자도 이해할 수 있게 정리합니다.',
                primaryCta: '진단 시작',
                secondaryCta: '플랜 보기',
                panelTitle: '글로벌 사용자용 설계',
                panelText: '복잡한 상징을 명확한 구조로 정리해 제공합니다.',
                panelStat1: '20개국 이상',
                panelStat2: '프라이빗 관리',
                panelStat3: '리포트 출력',
                sectionOneTitle: '이용 흐름',
                stepOneTitle: '생년 정보 입력',
                stepOneText: '일주, 동물, 오행 밸런스를 계산합니다.',
                stepTwoTitle: '명확한 요약',
                stepTwoText: '핵심 테마를 정돈된 카드로 제공합니다.',
                stepThreeTitle: '저장 및 공유',
                stepThreeText: '대시보드 저장과 상담용 출력이 가능합니다.',
                sectionTwoTitle: '제공 내용',
                featureOne: '일주 동물 · 오행 프로필',
                featureTwo: '키워드 테마와 계절 톤',
                featureThree: '전문 요약 카드',
                featureFour: '다국어 공유 도구',
                sectionThreeTitle: '국제 사용자 중심',
                sectionThreeText: '일관성, 프라이버시, 명확성을 우선합니다.'
            },
            insights: {
                pageEyebrow: '인사이트',
                pageTitle: '상징이 말하는 의미',
                pageSubtitle: '전통적 해석을 현대적 언어로 전달합니다.',
                primaryCta: '인사이트 보기',
                secondaryCta: '플랜 보기',
                heroPanelTitle: '핵심만 전달',
                heroPanelText: '가장 중요한 테마를 빠르게 파악합니다.',
                sectionOneTitle: '핵심 인사이트',
                insightOneTitle: '동물 아키타입',
                insightOneText: '일주 동물은 본능적 강점과 방향을 보여줍니다.',
                insightTwoTitle: '오행 에너지',
                insightTwoText: '오행 밸런스는 성향과 흐름을 나타냅니다.',
                insightThreeTitle: '키워드 포커스',
                insightThreeText: '실행 가능한 핵심 테마를 제공합니다.',
                sectionTwoTitle: '샘플 구성',
                sampleLead: '리포트 구성:',
                sampleItem1: '일주 요약과 상징 해석',
                sampleItem2: '오행 밸런스와 톤',
                sampleItem3: '행동 포인트 및 계획 노트',
                sampleCardTitle: '샘플 인사이트 카드',
                sampleCardText: '공유와 저장에 최적화된 요약 카드입니다.'
            },
            plans: {
                pageEyebrow: '플랜',
                pageTitle: '필요한 깊이에 맞게 선택',
                pageSubtitle: '단발성부터 대시보드까지 지원합니다.',
                primaryCta: '스타터 시작',
                secondaryCta: '기능 비교',
                heroPanelTitle: '유연한 이용',
                heroPanelText: '필요할 때 언제든 업그레이드하세요.',
                sectionOneTitle: '플랜 안내',
                planStarterTitle: '스타터',
                planStarterText: '1회 진단과 요약.',
                planStarterPrice: '$9',
                planStarterCta: '스타터 선택',
                planStarterFeature1: '단일 요약',
                planStarterFeature2: '키워드 테마',
                planStarterFeature3: '공유용 리포트',
                planProTitle: '프로',
                planProText: '무제한 진단, 히스토리, 리포트 제공.',
                planProPrice: '$19 / 월',
                planProCta: '프로 선택',
                planProFeature1: '무제한 진단',
                planProFeature2: '프로필 대시보드',
                planProFeature3: 'PDF 리포트',
                planPlusTitle: '플러스',
                planPlusText: '상담용 인사이트와 우선 지원.',
                planPlusPrice: '$39 / 월',
                planPlusCta: '플러스 선택',
                planPlusFeature1: '상담 메모',
                planPlusFeature2: '우선 지원',
                planPlusFeature3: '심화 가이드'
            },
            support: {
                pageEyebrow: '지원',
                pageTitle: '명확함과 신뢰를 기반으로',
                pageSubtitle: '국제 사용자에게 필요한 안내를 제공합니다.',
                primaryCta: '지원 문의',
                secondaryCta: '개요로 돌아가기',
                heroPanelTitle: '항상 대기',
                heroPanelText: '시간대에 맞춘 안내를 제공합니다.',
                sectionOneTitle: '글로벌 지원',
                supportCardOneTitle: '프라이버시 기본',
                supportCardOneText: '결과는 안전하게 보호됩니다.',
                supportCardTwoTitle: '다국어 출력',
                supportCardTwoText: '문화 차이를 고려한 표현을 제공합니다.',
                supportCardThreeTitle: 'FAQ 제공',
                supportCardThreeText: '자주 묻는 질문을 정리했습니다.',
                sectionTwoTitle: '자주 묻는 질문',
                faqOneTitle: '운세인가요?',
                faqOneText: '예측이 아니라 상징 해석에 초점을 둡니다.',
                faqTwoTitle: '출생 시간은 필수인가요?',
                faqTwoText: '선택입니다. 입력하면 더 정밀합니다.',
                faqThreeTitle: '결과 공유가 가능한가요?',
                faqThreeText: '네. 공유 가능한 형식으로 제공합니다.'
            }
        }
    }
};

const languageSelect = document.getElementById('languageSelect');
const langSwitcher = document.querySelector('.lang-switcher');
const pageName = document.body.dataset.page;
let currentLang = 'en';

const urlLang = new URLSearchParams(window.location.search).get('lang');
const savedLang = sessionStorage.getItem('lang');
if (savedLang && i18n[savedLang]) {
    currentLang = savedLang;
}
if (urlLang && i18n[urlLang]) {
    currentLang = urlLang;
}
languageSelect.value = currentLang;

languageSelect.addEventListener('change', (event) => {
    currentLang = event.target.value;
    sessionStorage.setItem('lang', currentLang);
    applyLanguage(currentLang);
});

function setText(id, value) {
    const el = document.getElementById(id);
    if (el) {
        el.innerText = value;
    }
}

function setNavLinks(lang) {
    const linkMap = {
        navOverview: 'overview.html',
        navInsights: 'insights.html',
        navPlans: 'plans.html',
        navSupport: 'support.html',
        footerLinkOverview: 'overview.html',
        footerLinkInsights: 'insights.html',
        footerLinkPlans: 'plans.html',
        footerLinkSupport: 'support.html'
    };

    Object.entries(linkMap).forEach(([id, href]) => {
        const el = document.getElementById(id);
        if (!el) {
            return;
        }
        const url = lang ? `${href}?lang=${lang}` : href;
        el.setAttribute('href', url);
    });

    document.querySelectorAll('[data-link]').forEach((el) => {
        const href = el.getAttribute('data-link');
        if (!href) {
            return;
        }
        const url = lang ? `${href}?lang=${lang}` : href;
        el.setAttribute('href', url);
    });
}

function applyLanguage(lang) {
    const copy = i18n[lang];
    document.documentElement.lang = lang;
    setText('brandName', copy.brandName);
    setText('brandTagline', copy.brandTagline);
    setText('navOverview', copy.navOverview);
    setText('navInsights', copy.navInsights);
    setText('navPlans', copy.navPlans);
    setText('navSupport', copy.navSupport);
    setText('loginButton', copy.loginButton);
    setText('signupButton', copy.signupButton);
    setText('footerBrand', copy.footerBrand);
    setText('footerTagline', copy.footerTagline);
    setText('footerText', copy.footerText);
    setText('footerLinkOverview', copy.footerLinkOverview);
    setText('footerLinkInsights', copy.footerLinkInsights);
    setText('footerLinkPlans', copy.footerLinkPlans);
    setText('footerLinkSupport', copy.footerLinkSupport);
    setText('langLabel', copy.langLabel);
    if (languageSelect) {
        languageSelect.options[0].text = copy.languageNames.en;
        languageSelect.options[1].text = copy.languageNames.ja;
        languageSelect.options[2].text = copy.languageNames.ko;
        languageSelect.setAttribute('aria-label', copy.langLabel);
    }
    if (langSwitcher) {
        langSwitcher.setAttribute('data-lang', lang);
    }

    const pageCopy = copy.pages?.[pageName];
    if (pageCopy) {
        Object.entries(pageCopy).forEach(([id, value]) => setText(id, value));
    }

    setNavLinks(lang);
}

applyLanguage(currentLang);
